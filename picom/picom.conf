#################################
#   Minimal Picom Configuration #
#################################

# Backend: use GLX for smoothness (fallback to xrender if issues)
backend = "glx";

# VSync to avoid screen tearing
vsync = true;

#################################
# Rounded borders
#################################
corner-radius = 10.0;
round-borders = 1;

#################################
# Shadows
#################################
shadow = true;               # Enable shadows
shadow-radius = 12;          # Shadow blur radius
shadow-offset-x = -7;        # Horizontal offset
shadow-offset-y = -7;        # Vertical offset
shadow-opacity = 0.5;        # Shadow transparency (0–1)

# Avoid shadows on some windows
shadow-exclude = [
  "class_g = 'i3-frame'",
  "class_g = 'dmenu'",
  "class_g = 'polybar'",
  "name = 'Notification'",
  "window_type = 'dock'",
  "window_type = 'desktop'"
];

#################################
# Transparency
#################################
inactive-opacity = 0.90;      # Inactive window opacity
active-opacity   = 0.85;      # Active window opacity
frame-opacity    = 0.90;      # Window borders
inactive-opacity-override = false;

#################################
# Per-App Transparency
#################################
opacity-rule = [
  "90:class_g = 'firefox-esr'",
  "95:class_g = 'Code'",
  "96:class_g = 'Cursor'",
  "85:class_g = 'Rofi'",
  "80:class_g = 'kitty'",
  "90:class_g = 'Mousepad'",
];

#################################
# Blur
#################################
blur: {
    method = "dual_kawase";  # Use dual_kawase for smooth blur
    strength = 5;            # Default blur strength for all windows
}

# Per-app blur for Firefox
blur-background = [
  "9:class_g = 'firefox-esr'",
  "8:class_g = 'Code'",
  "8:class_g = 'Cursor'",
  "8:class_g = 'kitty'",
  "6:class_g = 'Mousepad'",
];

# Exclude blur for specific windows
blur-background-exclude = [
  "name = 'Notification'",
  "window_type = 'dock'",
  "window_type = 'desktop'"
];

#################################
# Fading
#################################
fading = true;
fade-in-step = 0.07;
fade-out-step = 0.07;

#################################
# Misc
#################################
detect-client-opacity = true;
use-damage = true;          # Performance tweak
unredir-if-possible = true; # Don’t composite fullscreen apps (saves resources)
